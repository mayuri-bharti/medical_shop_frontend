import{j as e,d as s,e as t,f as a}from"./index-D9JmXA_p.js";import{r,c as l}from"./react-vendor-BnDW3H_d.js";import{c as i,b as n,A as d,k as c,i as o,l as m,z as x}from"./ui-vendor-DN-uZ73V.js";import"./query-vendor-DOOTwIbN.js";const h=()=>{const[h,u]=r.useState("phone"),[p,b]=r.useState(""),[g,f]=r.useState(""),[j,y]=r.useState(!1),[v,N]=r.useState(""),w=l();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-medical-50 to-medical-100 flex items-center justify-center px-4 py-12",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-medical-600 to-medical-700 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(i,{className:"text-white",size:32})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Login"}),e.jsx("p",{className:"text-gray-600",children:"Enter your admin phone number to continue"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:["phone"===h?e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),N(""),!p||p.length<10)N("Please enter a valid phone number");else{y(!0);try{(await s(p)).success&&(x.success("OTP sent successfully to admin phone!"),u("otp"))}catch(t){N(t.message||"Failed to send OTP"),x.error(t.message||"Failed to send OTP")}finally{y(!1)}}},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(n,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"tel",id:"phone",value:p,onChange:e=>b(e.target.value.replace(/\D/g,"").slice(0,10)),placeholder:"9022896203",className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500 text-lg",required:!0,disabled:j})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"We'll send you an OTP ~ verify your admin number"})]}),v&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(d,{className:"text-red-600 flex-shrink-0 mt-0.5",size:20}),e.jsx("p",{className:"text-sm text-red-800",children:v})]}),e.jsx("button",{type:"submit",disabled:j||!p||p.length<10,className:"w-full bg-medical-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-medical-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{size:20}),e.jsx("span",{children:"Send OTP"})]})})]}):e.jsxs("form",{onSubmit:async e=>{var s;if(e.preventDefault(),N(""),g&&6===g.length){y(!0);try{const e=await t(p,g);e.success&&(null==(s=e.data)?void 0:s.accessToken)&&(a(e.data.accessToken),x.success("Admin login successful!"),w("/admin/dashboard"))}catch(r){N(r.message||"Failed to verify OTP"),x.error(r.message||"Failed to verify OTP")}finally{y(!1)}}else N("Please enter a valid 6-digit OTP")},className:"space-y-6",children:[e.jsxs("button",{type:"button",onClick:()=>{u("phone"),f(""),N("")},className:"text-medical-600 hover:text-medical-700 text-sm font-medium flex items-center space-x-1",children:[e.jsx(o,{className:"rotate-180",size:16}),e.jsx("span",{children:"Change phone number"})]}),e.jsxs("div",{className:"bg-medical-50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"OTP sent to"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:p})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter 6-digit OTP"}),e.jsx("input",{type:"text",id:"otp",value:g,onChange:e=>f(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"123456",className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500 text-center text-2xl font-mono tracking-widest",maxLength:6,required:!0,disabled:j})]}),v&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(d,{className:"text-red-600 flex-shrink-0 mt-0.5",size:20}),e.jsx("p",{className:"text-sm text-red-800",children:v})]}),e.jsx("button",{type:"submit",disabled:j||6!==g.length,className:"w-full bg-medical-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-medical-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Verifying..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{size:20}),e.jsx("span",{children:"Verify OTP"})]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-center text-gray-500 flex items-center justify-center space-x-1",children:[e.jsx(i,{size:14}),e.jsx("span",{children:"Secure & encrypted"})]})})]})]})})};export{h as default};
