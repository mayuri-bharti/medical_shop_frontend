import{o as e,j as r,u as s}from"./index-D9JmXA_p.js";import{g as a,c as t,r as d}from"./react-vendor-BnDW3H_d.js";import{z as o,X as c,j as l,P as i}from"./ui-vendor-DN-uZ73V.js";import"./query-vendor-DOOTwIbN.js";const n=()=>{const{id:n}=a(),m=t(),[u,p]=d.useState(!0),[g,x]=d.useState(!1),[b,h]=d.useState({name:"",brand:"",sku:"",price:"",mrp:"",stock:"",description:"",category:"",images:[]});d.useEffect(()=>{y()},[n]);const y=async()=>{var r,s,a,t;p(!0);try{const d=null==(r=(await e(n)).data)?void 0:r.product;d?h({name:d.name||"",brand:d.brand||"",sku:d.sku||"",price:(null==(s=d.price)?void 0:s.toString())||"",mrp:(null==(a=d.mrp)?void 0:a.toString())||"",stock:(null==(t=d.stock)?void 0:t.toString())||"",description:d.description||"",category:d.category||"",images:d.images||[]}):(o.error("Product not found"),m("/admin/dashboard/manage-products"))}catch(d){o.error(d.message||"Failed to fetch product"),m("/admin/dashboard/manage-products")}finally{p(!1)}},f=e=>{const{name:r,value:s}=e.target;h(e=>({...e,[r]:s}))};return u?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-medical-600"})}):r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Edit Product"}),r.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Update product information"})]}),r.jsx("button",{onClick:()=>m("/admin/dashboard/manage-products"),className:"w-full sm:w-auto px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Back to Products"})]}),r.jsxs("form",{onSubmit:async e=>{e.preventDefault(),x(!0);try{const e={...b,price:parseFloat(b.price),mrp:parseFloat(b.mrp),stock:parseInt(b.stock),sku:b.sku.toUpperCase(),images:b.images.filter(e=>e.trim())};(await s(n,e)).success&&(o.success("Product updated successfully!"),m("/admin/dashboard/manage-products"))}catch(r){o.error(r.message||"Failed to update product")}finally{x(!1)}},className:"bg-white rounded-lg shadow-sm p-4 sm:p-6 space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),r.jsx("input",{type:"text",name:"name",value:b.name,onChange:f,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500",placeholder:"e.g., Paracetamol 500mg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand *"}),r.jsx("input",{type:"text",name:"brand",value:b.brand,onChange:f,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500",placeholder:"e.g., Generic"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU *"}),r.jsx("input",{type:"text",name:"sku",value:b.sku,onChange:f,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500 uppercase",placeholder:"e.g., PROD-001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),r.jsxs("select",{name:"category",value:b.category,onChange:f,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500",children:[r.jsx("option",{value:"",children:"Select category"}),["Prescription Medicines","OTC Medicines","Wellness Products","Personal Care","Health Supplements","Baby Care","Medical Devices","Ayurvedic Products"].map(e=>r.jsx("option",{value:e,children:e},e))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (₹) *"}),r.jsx("input",{type:"number",name:"price",value:b.price,onChange:f,required:!0,min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"MRP (₹) *"}),r.jsx("input",{type:"number",name:"mrp",value:b.mrp,onChange:f,required:!0,min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Quantity *"}),r.jsx("input",{type:"number",name:"stock",value:b.stock,onChange:f,required:!0,min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500",placeholder:"0"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),r.jsx("textarea",{name:"description",value:b.description,onChange:f,required:!0,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500",placeholder:"Enter product description..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Images"}),r.jsxs("div",{className:"space-y-3",children:[b.images.map((e,s)=>r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx("img",{src:e,alt:`Product ${s+1}`,className:"w-16 h-16 object-cover rounded"}),r.jsx("input",{type:"text",value:e,onChange:e=>{const r=[...b.images];r[s]=e.target.value,h(e=>({...e,images:r}))},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500",placeholder:"Image URL"}),r.jsx("button",{type:"button",onClick:()=>(e=>{h(r=>({...r,images:r.images.filter((r,s)=>s!==e)}))})(s),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(c,{size:20})})]},s)),r.jsxs("button",{type:"button",onClick:()=>{const e=prompt("Enter image URL:");e&&e.trim()&&h(r=>({...r,images:[...r.images,e.trim()]}))},className:"flex items-center space-x-2 px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-medical-500 hover:text-medical-600 transition-colors",children:[r.jsx(l,{size:20}),r.jsx("span",{children:"Add Image URL"})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-3 sm:gap-4 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>m("/admin/dashboard/manage-products"),className:"w-full sm:w-auto px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:g,className:"w-full sm:w-auto px-6 py-2 bg-medical-600 text-white rounded-lg hover:bg-medical-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:g?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(i,{size:20}),r.jsx("span",{children:"Update Product"})]})})]})]})]})};export{n as default};
