import{g as e,j as t}from"./index-D9JmXA_p.js";import{u as r}from"./query-vendor-DOOTwIbN.js";import{r as a}from"./react-vendor-BnDW3H_d.js";import{a as s}from"./api-BmK1iuKu.js";import{P as i}from"./ui-vendor-DN-uZ73V.js";const d=[{id:"ORD000001",orderId:"ORD000001",medicines:[{name:"Paracetamol 500mg",quantity:2,price:25},{name:"Amoxicillin 250mg",quantity:1,price:45}],status:"delivered",date:"2024-01-15",total:95},{id:"ORD000002",orderId:"ORD000002",medicines:[{name:"Cetirizine 10mg",quantity:1,price:30}],status:"shipped",date:"2024-01-18",total:30},{id:"ORD000003",orderId:"ORD000003",medicines:[{name:"Aspirin 100mg",quantity:3,price:20},{name:"Vitamin D3",quantity:1,price:150}],status:"pending",date:"2024-01-20",total:210}],n=()=>{const n=e(),{data:l,isLoading:c,error:x}=r("orders",async()=>{var e;if(!n)throw new Error("Not authenticated");try{return(await s.get("/orders",{headers:{Authorization:`Bearer ${n}`}})).data}catch(t){if(401===(null==(e=t.response)?void 0:e.status))throw t;throw t}},{retry:!1,refetchOnWindowFocus:!1,enabled:!!n,onError:e=>{var t;null==(t=e.response)||t.status}}),m=a.useMemo(()=>l?Array.isArray(l)?l:l.success&&Array.isArray(l.data)||Array.isArray(l.data)?l.data:[]:null,[l]);if(c)return t.jsx("div",{className:"flex justify-center items-center min-h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-medical-600"})});const o=a.useMemo(()=>!x&&m&&Array.isArray(m)&&0!==m.length?m:d,[x,m]),p=a.useMemo(()=>{const e=[];return Array.isArray(o)?(o.forEach(t=>{(t.medicines||t.items||[]).forEach((r,a)=>{var s;e.push({key:`${t.id||t._id}-${a}`,orderId:t.orderId||t.orderNumber||t.id||t._id,medicineName:r.name||(null==(s=r.product)?void 0:s.name),quantity:r.quantity,price:r.price,status:t.status,date:t.date||t.createdAt,isFirstItem:0===a})})}),e):e},[o]);return 0===p.length?t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(i,{size:64,className:"mx-auto text-gray-400 mb-4"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No orders yet"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Your order history will appear here."}),t.jsx("a",{href:"/products",className:"inline-block px-6 py-3 bg-medical-600 text-white rounded-lg hover:bg-medical-700 transition-colors",children:"Start Shopping"})]})}):t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Your Orders"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"View all your order history"})]}),t.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Medicine Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(e=>{return t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isFirstItem&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.orderId}),t.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString()})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm text-gray-900",children:e.medicineName})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:e.quantity})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["â‚¹",e.price]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isFirstItem&&(r=e.status,t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${{pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",processing:"bg-purple-100 text-purple-800",shipped:"bg-indigo-100 text-indigo-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[r]||"bg-gray-100 text-gray-800"}`,children:r.charAt(0).toUpperCase()+r.slice(1)}))})]},e.key);var r})})]})})}),t.jsx("div",{className:"mt-8 text-center",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["Total Orders: ",t.jsx("span",{className:"font-medium text-gray-900",children:Array.isArray(o)?o.length:0})]})})]})};export{n as default};
