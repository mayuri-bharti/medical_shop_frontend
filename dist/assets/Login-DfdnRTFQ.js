import{g as e,j as s,s as t,v as a,a as r}from"./index-D9JmXA_p.js";import{r as l,c as n,f as d}from"./react-vendor-BnDW3H_d.js";import{c as i,b as c,A as o,k as m,l as x,z as h}from"./ui-vendor-DN-uZ73V.js";import"./query-vendor-DOOTwIbN.js";const u=()=>{const[u,p]=l.useState("phone"),[b,f]=l.useState(""),[g,j]=l.useState(""),[y,v]=l.useState(!1),[N,w]=l.useState(""),P=n(),[T]=d(),O=T.get("redirect");l.useEffect(()=>{if(e())if(O){const e=decodeURIComponent(O);P(e,{replace:!0})}else P("/dashboard",{replace:!0})},[P,O]);return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-medical-50 via-blue-50 to-medical-100 px-4 py-12",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-medical-600 to-medical-700 rounded-2xl mb-4 shadow-lg",children:s.jsx(i,{className:"text-white",size:40})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"HealthPlus"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Your trusted health partner"})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-medical-600 to-medical-700 p-8 text-white",children:[s.jsx("h2",{className:"text-2xl font-bold mb-1",children:"phone"===u?"Login with Phone":"Verify OTP"}),s.jsx("p",{className:"text-medical-100",children:"phone"===u?"Enter your phone number to continue":`Enter OTP sent to +91 ${b}`})]}),s.jsx("div",{className:"p-8",children:"phone"===u?s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),w(""),!b||b.length<10)w("Please enter a valid phone number");else{v(!0);try{(await t(b)).success&&(h.success("OTP sent successfully!"),p("otp"))}catch(s){w(s.message||"Failed to send OTP"),h.error(s.message||"Failed to send OTP")}finally{v(!1)}}},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:s.jsx(c,{className:"text-gray-400",size:20})}),s.jsx("input",{type:"tel",value:b,onChange:e=>f(e.target.value.replace(/\D/g,"")),placeholder:"Enter 10-digit phone number",className:"block w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-medical-500 focus:border-transparent text-lg",disabled:y,maxLength:10,required:!0})]}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"We'll send you an OTP ~ verify your number"})]}),N&&s.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-red-50 border border-red-200 rounded-xl",children:[s.jsx(o,{className:"text-red-600",size:20}),s.jsx("p",{className:"text-sm text-red-600",children:N})]}),s.jsx("button",{type:"submit",disabled:y||b.length<10,className:"w-full flex items-center justify-center space-x-2 py-4 px-6 bg-medical-600 hover:bg-medical-700 text-white font-semibold rounded-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Sending OTP..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(m,{size:20}),s.jsx("span",{children:"Send OTP"})]})})]}):s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),w(""),g&&6===g.length){v(!0);try{const e=await a(b,g);if(e.success)if(r(e.data.accessToken),h.success("Login successful!"),O){const e=decodeURIComponent(O);P(e)}else P("/dashboard")}catch(s){w(s.message||"Invalid OTP"),h.error(s.message||"Invalid OTP")}finally{v(!1)}}else w("Please enter a valid 6-digit OTP")},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter 6-Digit OTP"}),s.jsx("input",{type:"text",value:g,onChange:e=>j(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"block w-full text-center text-4xl tracking-widest py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-medical-500 focus:border-transparent font-bold",disabled:y,maxLength:6,required:!0,autoFocus:!0}),s.jsx("p",{className:"mt-2 text-sm text-gray-500 text-center",children:"Enter the 6-digit code sent to your phone"})]}),N&&s.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-red-50 border border-red-200 rounded-xl",children:[s.jsx(o,{className:"text-red-600",size:20}),s.jsx("p",{className:"text-sm text-red-600",children:N})]}),s.jsx("button",{type:"submit",disabled:y||6!==g.length,className:"w-full flex items-center justify-center space-x-2 py-4 px-6 bg-medical-600 hover:bg-medical-700 text-white font-semibold rounded-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Verifying..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(x,{size:20}),s.jsx("span",{children:"Verify & Continue"})]})}),s.jsx("button",{type:"button",onClick:()=>p("phone"),className:"w-full text-medical-600 hover:text-medical-700 text-sm font-medium transition-colors",children:"‚Üê Change phone number"})]})}),s.jsx("div",{className:"px-8 py-6 bg-gray-50 border-t",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-600",children:[s.jsx(i,{className:"text-medical-600",size:16}),s.jsx("span",{children:"Secure & encrypted"})]})})]}),s.jsxs("p",{className:"text-center text-sm text-gray-600 mt-8",children:["Need help? ",s.jsx("a",{href:"#",className:"text-medical-600 hover:underline font-medium",children:"Contact Support"})]})]})})};export{u as default};
