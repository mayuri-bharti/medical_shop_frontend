import{c as e,j as s}from"./index-D9JmXA_p.js";import{f as a,r as t}from"./react-vendor-BnDW3H_d.js";import{P as r}from"./ProductCard-D9TLvMUF.js";import{h as o,o as c,p as i}from"./ui-vendor-DN-uZ73V.js";import"./query-vendor-DOOTwIbN.js";const l=()=>{const[l,n]=a(),[d,m]=t.useState([]),[p,u]=t.useState(!0),[g,x]=t.useState(null),[h,y]=t.useState(parseInt(l.get("page"))||1),[b,j]=t.useState(1),[v,f]=t.useState(l.get("search")||""),[N,w]=t.useState(l.get("category")||"");t.useEffect(()=>{C()},[h,v,N]);const C=async()=>{var s,a,t,r;u(!0),x(null);try{const a="https://medical-shop-backend.vercel.app/api",t=await e.get(`${a}/products`,{params:{page:h,limit:20,...v&&{search:v},...N&&{category:N}},timeout:3e4,headers:{Accept:"application/json","Content-Type":"application/json"}});if(t.data&&t.data.success){const e=t.data.products||[];m(e),j((null==(s=t.data.pagination)?void 0:s.pages)||1)}else x("Failed to load products: Invalid response format")}catch(o){"ECONNABORTED"===o.code||o.message.includes("timeout")?x("Connection timeout. Please check your internet connection and try again."):"ERR_NETWORK"===o.code||o.message.includes("Network Error")?x("Network error. Please check your internet connection."):0===(null==(a=o.response)?void 0:a.status)?x("Cannot connect to server. Please check your internet connection."):x((null==(r=null==(t=o.response)?void 0:t.data)?void 0:r.message)||o.message||"Failed to load products. Please try again.")}finally{u(!1)}},k=e=>{y(e),n({page:e,...v&&{search:v},...N&&{category:N}}),window.scrollTo({top:0,behavior:"smooth"})};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Products"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("form",{onSubmit:e=>{e.preventDefault(),y(1),n({page:1,...v&&{search:v},...N&&{category:N}})},className:"flex gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search medicines...",value:v,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent transition-all"})]}),s.jsx("button",{type:"submit",className:"px-6 py-3 bg-medical-600 hover:bg-medical-700 text-white font-medium rounded-lg transition-colors",children:"Search"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["Prescription Medicines","OTC Medicines","Wellness Products","Personal Care","Health Supplements","Baby Care","Medical Devices","Ayurvedic Products"].map(e=>s.jsx("button",{onClick:()=>(e=>{w(e===N?"":e),y(1),n({page:1,...v&&{search:v},...e!==N&&e&&{category:e}})})(e),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(N===e?"bg-medical-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]})]})}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:p?s.jsx("div",{className:"flex justify-center items-center min-h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-medical-600"})}):g?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-red-600",children:g}),s.jsx("button",{onClick:C,className:"mt-4 px-4 py-2 bg-medical-600 text-white rounded-lg hover:bg-medical-700 transition-colors",children:"Retry"})]}):0===d.length?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-600",children:"No products found matching your criteria."})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 md:gap-3 mb-8",children:d.map(e=>s.jsx(r,{product:e},e._id))}),b>1&&s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("button",{onClick:()=>k(h-1),disabled:1===h,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:s.jsx(c,{size:20})}),[...Array(b)].map((e,a)=>{const t=a+1;return 1===t||t===b||t>=h-1&&t<=h+1?s.jsx("button",{onClick:()=>k(t),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(h===t?"bg-medical-600 text-white":"bg-white border border-gray-300 hover:bg-gray-50"),children:t},t):t===h-2||t===h+2?s.jsx("span",{className:"px-2",children:"..."},t):null}),s.jsx("button",{onClick:()=>k(h+1),disabled:h===b,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:s.jsx(i,{size:20})})]})]})})]})};export{l as default};
