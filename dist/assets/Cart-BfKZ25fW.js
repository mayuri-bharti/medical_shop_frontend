import{g as e,j as s}from"./index-D9JmXA_p.js";import{c as t,r as a}from"./react-vendor-BnDW3H_d.js";import{P as r}from"./PageCarousel-9_xLH3GO.js";import{z as i,q as l,S as c,r as n,s as o,t as d}from"./ui-vendor-DN-uZ73V.js";import"./query-vendor-DOOTwIbN.js";const m=()=>{const m=t(),[x,h]=a.useState(null),[p,u]=a.useState(!0),g="https://medical-shop-backend.vercel.app/api";a.useEffect(()=>{j()},[]);const j=async()=>{try{const s=e(),t=await fetch(`${g}/cart`,{headers:{Authorization:`Bearer ${s}`}}),a=await t.json();a.success&&h(a.data)}catch(s){i.error("Failed to load cart")}finally{u(!1)}},f=async(e,s)=>{if(s<1)return;const t={...x},a=t.items.find(s=>s.product._id===e);a&&(a.quantity=s),h(t)};if(p)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-medical-600"})});if(!x||0===x.items.length)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx(l,{size:64,className:"mx-auto text-gray-400 mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Your cart is empty"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Add some medicines to get started!"}),s.jsx("button",{onClick:()=>m("/products"),className:"px-6 py-3 bg-medical-600 text-white font-medium rounded-lg hover:bg-medical-700 transition-colors",children:"Shop Now"})]})});return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsx(r,{images:[{src:"https://images.unsplash.com/photo-1607619056574-7b8d3ee536b2?w=1200&h=300&fit=crop",alt:"Free Delivery",title:"Free Delivery on Orders Above ₹499",description:"Shop more, save more on delivery charges"},{src:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=1200&h=300&fit=crop",alt:"Save More",title:"Extra 10% Off on First Order",description:"Use code: FIRST10 at checkout"},{src:"https://images.unsplash.com/photo-1556740758-90de374c12ad?w=1200&h=300&fit=crop",alt:"Wallet Offers",title:"Instant Cashback with Wallet",description:"Get 5% cashback on payments via digital wallet"}],autoSlide:!0,interval:4e3,height:"h-32 md:h-40 lg:h-48"})}),s.jsxs("div",{className:"flex items-center space-x-2 mb-8",children:[s.jsx(c,{className:"text-medical-600",size:32}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Shopping Cart"})]}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2 space-y-4",children:x.items.map(t=>s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx("img",{src:t.product.image||"/placeholder-medicine.jpg",alt:t.product.name,className:"w-full h-full object-cover rounded-lg"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:t.product.name}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.product.brand}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>f(t.product._id,t.quantity-1),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:s.jsx(n,{size:16})}),s.jsx("span",{className:"w-8 text-center font-medium",children:t.quantity}),s.jsx("button",{onClick:()=>f(t.product._id,t.quantity+1),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:s.jsx(o,{size:16})})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-gray-900",children:["₹",(t.price*t.quantity).toLocaleString()]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["₹",t.price.toLocaleString()," each"]})]}),s.jsx("button",{onClick:()=>(async s=>{try{const t=e();if(!(await fetch(`${g}/cart/items/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok)throw new Error("Failed to remove item");i.success("Item removed from cart"),j()}catch(t){i.error("Failed to remove item")}})(t.product._id),className:"text-red-600 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(d,{size:18})})]})]})]})},t.product._id))}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Summary"}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal"}),s.jsxs("span",{className:"font-semibold",children:["₹",x.subtotal.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery"}),s.jsxs("span",{className:"font-semibold",children:["₹",x.deliveryFee.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Taxes"}),s.jsxs("span",{className:"font-semibold",children:["₹",x.taxes.toLocaleString()]})]}),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["₹",x.total.toLocaleString()]})]})})]}),s.jsx("button",{onClick:()=>m("/checkout"),className:"w-full py-3 bg-medical-600 text-white font-medium rounded-lg hover:bg-medical-700 transition-colors",children:"Proceed to Checkout"}),s.jsx("p",{className:"text-sm text-gray-600 text-center mt-4",children:"Free delivery on orders above ₹499"})]})})]})]})})};export{m as default};
