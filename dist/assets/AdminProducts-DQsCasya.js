import{j as e}from"./index-D9JmXA_p.js";import{r as s}from"./react-vendor-BnDW3H_d.js";import{z as r,s as t,h as a,X as i,G as c,D as l,t as n}from"./ui-vendor-DN-uZ73V.js";import"./query-vendor-DOOTwIbN.js";const d=()=>{const[d,o]=s.useState([]),[m,x]=s.useState(!0),[u,p]=s.useState(!1),[g,h]=s.useState(null),[y,b]=s.useState(""),[j,f]=s.useState({name:"",brand:"",sku:"",price:"",mrp:"",stock:"",description:"",images:[],category:""}),[v,N]=s.useState(""),w="https://medical-shop-backend.vercel.app/api",k=sessionStorage.getItem("accessToken");s.useEffect(()=>{C()},[y]);const C=async()=>{try{const e=y?`${w}/admin/products?search=${encodeURIComponent(y)}`:`${w}/admin/products`,s=await fetch(e,{headers:{Authorization:`Bearer ${k}`}}),r=await s.json();r.success&&o(r.data.products||[])}catch(e){r.error("Failed to load products")}finally{x(!1)}},P=()=>{f({name:"",brand:"",sku:"",price:"",mrp:"",stock:"",description:"",images:[],category:""}),h(null),p(!1),N("")};return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-medical-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Product Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your products inventory"})]}),e.jsxs("button",{onClick:()=>p(!u),className:"flex items-center space-x-2 px-4 py-2 bg-medical-600 text-white rounded-lg hover:bg-medical-700 transition-colors",children:[e.jsx(t,{size:20}),e.jsx("span",{children:"Add Product"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search products...",value:y,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"})]})}),u&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:g?"Edit Product":"Add New Product"}),e.jsx("button",{onClick:P,className:"text-gray-500 hover:text-gray-700",children:e.jsx(i,{size:24})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={...j,price:parseFloat(j.price),mrp:parseFloat(j.mrp),stock:parseInt(j.stock),sku:j.sku.toUpperCase()},s=g?`${w}/admin/products/${g._id}`:`${w}/admin/products`,t=g?"PUT":"POST",a=await fetch(s,{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify(e)}),i=await a.json();if(!a.ok||!i.success)throw new Error(i.message||"Operation failed");r.success(g?"Product updated!":"Product created!"),P(),C()}catch(s){r.error(s.message||"Failed to save product")}},className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),e.jsx("input",{type:"text",required:!0,value:j.name,onChange:e=>f({...j,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand *"}),e.jsx("input",{type:"text",required:!0,value:j.brand,onChange:e=>f({...j,brand:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU *"}),e.jsx("input",{type:"text",required:!0,value:j.sku,onChange:e=>f({...j,sku:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent uppercase",placeholder:"ABC-000-TAB-10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:j.category,onChange:e=>f({...j,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Prescription Medicines",children:"Prescription Medicines"}),e.jsx("option",{value:"OTC Medicines",children:"OTC Medicines"}),e.jsx("option",{value:"Wellness Products",children:"Wellness Products"}),e.jsx("option",{value:"Personal Care",children:"Personal Care"}),e.jsx("option",{value:"Health Supplements",children:"Health Supplements"}),e.jsx("option",{value:"Baby Care",children:"Baby Care"}),e.jsx("option",{value:"Medical Devices",children:"Medical Devices"}),e.jsx("option",{value:"Ayurvedic Products",children:"Ayurvedic Products"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Price (₹) *"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:j.price,onChange:e=>f({...j,price:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"MRP (₹) *"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:j.mrp,onChange:e=>f({...j,mrp:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock *"}),e.jsx("input",{type:"number",required:!0,min:"0",value:j.stock,onChange:e=>f({...j,stock:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{required:!0,rows:3,value:j.description,onChange:e=>f({...j,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Images"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"url",value:v,onChange:e=>N(e.target.value),placeholder:"Enter image URL",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>{v.trim()&&(f({...j,images:[...j.images,v]}),N(""))},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.images.map((s,r)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s,alt:`Product ${r+1}`,className:"w-16 h-16 object-cover rounded border"}),e.jsx("button",{type:"button",onClick:()=>(e=>{f({...j,images:j.images.filter((s,r)=>r!==e)})})(r),className:"absolute -top-1 -right-1 bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center",children:e.jsx(i,{size:14})})]},r))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-6 py-2 bg-medical-600 text-white rounded-lg hover:bg-medical-700 transition-colors",children:[e.jsx(c,{size:20}),e.jsx("span",{children:g?"Update":"Create"})]}),e.jsx("button",{type:"button",onClick:P,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:s.images&&s.images.length>0?s.images[0]:"/placeholder.jpg",alt:s.name,className:"w-10 h-10 object-cover rounded mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.brand})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.sku}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",s.price]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+(s.stock>10?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s.stock})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.category||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>(e=>{h(e),f({name:e.name,brand:e.brand,sku:e.sku,price:e.price.toString(),mrp:e.mrp.toString(),stock:e.stock.toString(),description:e.description,images:e.images||[],category:e.category||""}),p(!0)})(s),className:"text-medical-600 hover:text-medical-900 mr-3",children:e.jsx(l,{size:18})}),e.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{const s=await fetch(`${w}/admin/products/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${k}`}}),t=await s.json();if(!s.ok||!t.success)throw new Error(t.message||"Delete failed");r.success("Product deleted!"),C()}catch(s){r.error("Failed to delete product")}})(s._id),className:"text-red-600 hover:text-red-900",children:e.jsx(n,{size:18})})]})]},s._id))})]})})})]})})};export{d as default};
